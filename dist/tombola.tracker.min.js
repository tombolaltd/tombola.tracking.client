!function(t,e){if("object"==typeof exports&&"object"==typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{var n=e();for(var o in n)("object"==typeof exports?exports:t)[o]=n[o]}}(this,function(){return function(t){function e(o){if(n[o])return n[o].exports;var i=n[o]={exports:{},id:o,loaded:!1};return t[o].call(i.exports,i,i.exports,e),i.loaded=!0,i.exports}var n={};return e.m=t,e.c=n,e.p="",e(0)}([function(t,e,n){"use strict";n(1);var o=n(3),i=n(4),r=n(7),s=function(){function t(t){this.configuration=t,this.configuration.bufferedLog&&!this.configuration.flushTimeout&&(this.configuration.flushTimeout=o.CONSTANTS.DEFAULT_FLUSH_TIMEOUT),this.logger=new r.Logger(this.configuration),this.interactions=[]}return t.prototype.addInteractions=function(t){var e=this;return t.forEach(function(t){e.interactions.push(new r.Interaction(e.logger,t.selector,t.event,t.buildLog))}),this},t.prototype.log=function(t){return t instanceof Array?t.forEach(this.logger.push.bind(this.logger)):this.logger.push(t),this},t.EventName=i.EventName,t.Location=i.Location,t}();e.Tracker=s},function(t,e,n){"use strict";n(2)},function(t,e){"function"!=typeof Object.assign&&(Object.assign=function(t){if(void 0===t||null===t)throw new TypeError("Cannot convert undefined or null to object");for(var e=Object(t),n=1;n<arguments.length;n++){var o=arguments[n];if(void 0!==o&&null!==o)for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(e[i]=o[i])}return e})},function(t,e){"use strict";e.CONSTANTS={DEFAULT_FLUSH_TIMEOUT:3e4,LOCAL_STORAGE_KEY:"tombola.events"}},function(t,e,n){"use strict";function o(t){for(var n in t)e.hasOwnProperty(n)||(e[n]=t[n])}o(n(5)),o(n(6))},function(t,e){"use strict";var n;!function(t){t[t.PageEnter=0]="PageEnter",t[t.PageLeave=1]="PageLeave",t[t.PageIdle=2]="PageIdle",t[t.ValidationError=3]="ValidationError",t[t.ValidationSuccess=4]="ValidationSuccess",t[t.ButtonPress=5]="ButtonPress",t[t.FormInput=6]="FormInput"}(n||(n={})),e.EventName=n;var n;!function(t){function e(e){return t[e]}t.getStringValue=e}(n||(n={})),e.EventName=n},function(t,e){"use strict";var n;!function(t){t[t.Registration=0]="Registration",t[t.Login=1]="Login",t[t.MyAccount=2]="MyAccount",t[t.Deposit=3]="Deposit",t[t.FirstDeposit=4]="FirstDeposit",t[t.SecondIdVerification=5]="SecondIdVerification",t[t.Withdrawal=6]="Withdrawal",t[t.PaymentDetails=7]="PaymentDetails",t[t.ChangePassword=8]="ChangePassword",t[t.ChangeUsername=9]="ChangeUsername",t[t.ChangeContactPrefs=10]="ChangeContactPrefs",t[t.ChangeContactDetails=11]="ChangeContactDetails",t[t.LockLimitPrefs=12]="LockLimitPrefs",t[t.TimekeeperPrefs=13]="TimekeeperPrefs",t[t.CoolOffPrefs=14]="CoolOffPrefs",t[t.SelfExclusionPrefs=15]="SelfExclusionPrefs"}(n||(n={})),e.Location=n;var n;!function(t){function e(e){return t[e]}t.getStringValue=e}(n||(n={})),e.Location=n},function(t,e,n){"use strict";function o(t){for(var n in t)e.hasOwnProperty(n)||(e[n]=t[n])}o(n(8)),o(n(9)),o(n(12))},function(t,e){"use strict";var n=function(){function t(t,e,n,o){void 0===o&&(o={}),this.location=t,this.object=e,this.eventName=n,this.clientTime=Date.now(),this.data=o}return t}();e.Event=n},function(t,e,n){"use strict";var o=n(3),i=n(10),r=n(4),s=n(11),a=function(){function t(t){var e=this;if(this.configuration=t,this.url=this.configuration.apiEndpoint+"/event",this.configuration.localStorage=this.configuration.localStorage||new s.LocalStoragePolyfill,this.events=JSON.parse(this.configuration.localStorage.getItem(o.CONSTANTS.LOCAL_STORAGE_KEY)||"[]"),this.configuration.bufferedLog){if(void 0===this.configuration.localStorage)throw new Error('Tombola Events: "localStorage" is required when using a buffered log');window.setInterval(function(){return e.flushLogs()},this.configuration.flushTimeout)}this.events.length>0&&this.flushLogs()}return t.prototype.push=function(t){t.clientTime=Date.now(),this.events.push(t),this.configuration.bufferedLog?this.configuration.localStorage.setItem(o.CONSTANTS.LOCAL_STORAGE_KEY,JSON.stringify(this.events)):this.flushLogs()},t.prototype.flushLogs=function(){var t=this;try{var e=new(XMLHttpRequest||ActiveXObject)("MSXML2.XMLHTTP.3.0"),n=this.events.splice(0);if(n.length>0){e.open("POST",this.url,1),e.setRequestHeader("X-Requested-With","XMLHttpRequest"),e.setRequestHeader("Content-type","application/json"),e.onreadystatechange=function(){4===e.readyState&&((e.status>=400||e.status>=500)&&(t.events=t.events.concat(n),console.error("Tombola Events: Failed to send events:",e)),t.configuration.localStorage.setItem(o.CONSTANTS.LOCAL_STORAGE_KEY,JSON.stringify(t.events)))};var s=Object.assign({},{appName:this.configuration.appName,trackingId:this.configuration.trackingId,tenantId:this.configuration.tenantId,formFactor:this.configuration.formFactor,userId:this.configuration.userId,userAgent:window.navigator.userAgent},{events:n.map(function(t){return new i.EventPayload(r.Location.getStringValue(t.location),r.EventName.getStringValue(t.eventName),t.clientTime,t.object,t.data)})});e.send(JSON.stringify(s))}}catch(a){console.error("Tombola Events: Failed to send tracking events:",a)}},t}();e.Logger=a},function(t,e){"use strict";var n=function(){function t(t,e,n,o,i){void 0===i&&(i={}),this.location=t,this.eventName=e,this.clientTime=n,this.object=o,this.data=i}return t}();e.EventPayload=n},function(t,e){"use strict";var n=function(){function t(){this._store={}}return Object.defineProperty(t.prototype,"length",{get:function(){return Object.keys(this._store).length},enumerable:!0,configurable:!0}),t.prototype.getItem=function(t){return this._store[t]},t.prototype.setItem=function(t,e){this._store[t]=e},t.prototype.removeItem=function(t){delete this._store[t]},t.prototype.clear=function(){this._store={}},t.prototype.key=function(t){return Object.keys(this._store)[t]},t}();e.LocalStoragePolyfill=n},function(t,e){"use strict";var n=function(){function t(t,e,n,o){if(this.selector=e,this.event=n,this.elements=document.querySelectorAll(this.selector),this.buildEvent=o,this.logger=t,this.elements.length>0)for(var i=0;i<this.elements.length;i++){var r=this,s=function(t){return function(e){var n=r.buildEvent(t,e);r.logger.push(n)}};this.elements[i].addEventListener(this.event,s(this.elements[i]))}else console.warn("Tombola Events: Could not find an element with selector",this.selector)}return t}();e.Interaction=n}])});