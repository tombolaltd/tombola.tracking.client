!function(t,e){if("object"==typeof exports&&"object"==typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{var n=e();for(var i in n)("object"==typeof exports?exports:t)[i]=n[i]}}(this,function(){return function(t){function e(i){if(n[i])return n[i].exports;var o=n[i]={exports:{},id:i,loaded:!1};return t[i].call(o.exports,o,o.exports,e),o.loaded=!0,o.exports}var n={};return e.m=t,e.c=n,e.p="",e(0)}([function(t,e,n){"use strict";n(1);var i=n(3),o=n(4),r=n(7),s=function(){function t(t){this.configuration=t,this.configuration.bufferedLog&&!this.configuration.flushTimeout&&(this.configuration.flushTimeout=i.CONSTANTS.DEFAULT_FLUSH_TIMEOUT),this.logger=new r.Logger(this.configuration),this.interactions=[]}return t.prototype.addInteractions=function(t){var e=this;return t.forEach(function(t){e.interactions.push(new r.Interaction(e.logger,t.selector,t.event,t.buildLog))}),this},t.prototype.log=function(t){return this.logger.push(t),this},t.EventName=o.EventName,t.Location=o.Location,t}();e.Tracker=s},function(t,e,n){"use strict";n(2)},function(t,e){"function"!=typeof Object.assign&&(Object.assign=function(t){if(void 0===t||null===t)throw new TypeError("Cannot convert undefined or null to object");for(var e=Object(t),n=1;n<arguments.length;n++){var i=arguments[n];if(void 0!==i&&null!==i)for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(e[o]=i[o])}return e})},function(t,e){"use strict";e.CONSTANTS={DEFAULT_FLUSH_TIMEOUT:3e4,LOCAL_STORAGE_KEY:"tombola.events"}},function(t,e,n){"use strict";function i(t){for(var n in t)e.hasOwnProperty(n)||(e[n]=t[n])}i(n(5)),i(n(6))},function(t,e){"use strict";var n;!function(t){t[t.PageEnter=0]="PageEnter",t[t.PageLeave=1]="PageLeave",t[t.PageIdle=2]="PageIdle",t[t.ValidationError=3]="ValidationError",t[t.ValidationSuccess=4]="ValidationSuccess",t[t.ButtonPress=5]="ButtonPress"}(n||(n={})),e.EventName=n;var n;!function(t){function e(e){return t[e]}t.getStringValue=e}(n||(n={})),e.EventName=n},function(t,e){"use strict";var n;!function(t){t[t.Registration=0]="Registration",t[t.Login=1]="Login",t[t.MyAccount=2]="MyAccount",t[t.Deposit=3]="Deposit",t[t.Withdrawal=4]="Withdrawal",t[t.PaymentDetails=5]="PaymentDetails",t[t.ChangePassword=6]="ChangePassword",t[t.ChangeUsername=7]="ChangeUsername",t[t.ChangeContactPrefs=8]="ChangeContactPrefs",t[t.ChangeContactDetails=9]="ChangeContactDetails",t[t.LockLimitPrefs=10]="LockLimitPrefs",t[t.TimekeeperPrefs=11]="TimekeeperPrefs",t[t.CoolOffPrefs=12]="CoolOffPrefs",t[t.SelfExclusionPrefs=13]="SelfExclusionPrefs"}(n||(n={})),e.Location=n;var n;!function(t){function e(e){return t[e]}t.getStringValue=e}(n||(n={})),e.Location=n},function(t,e,n){"use strict";function i(t){for(var n in t)e.hasOwnProperty(n)||(e[n]=t[n])}i(n(8)),i(n(9)),i(n(11))},function(t,e){"use strict";var n=function(){function t(t,e,n,i){void 0===i&&(i={}),this.location=t,this.object=e,this.eventName=n,this.clientTime=Date.now(),this.data=i}return t}();e.Event=n},function(t,e,n){"use strict";var i=n(3),o=n(10),r=n(4),s=function(){function t(t){var e=this;this.configuration=t,this.url=this.configuration.apiEndpoint+"/event",this.events=JSON.parse(this.configuration.localStorage.getItem(i.CONSTANTS.LOCAL_STORAGE_KEY)||"[]"),this.configuration.bufferedLog&&window.setInterval(function(){return e.flushLogs()},this.configuration.flushTimeout),this.events.length>0&&this.flushLogs()}return t.prototype.push=function(t){t.clientTime=Date.now(),this.events.push(t),this.configuration.bufferedLog?this.configuration.localStorage.setItem(i.CONSTANTS.LOCAL_STORAGE_KEY,JSON.stringify(this.events)):this.flushLogs()},t.prototype.flushLogs=function(){var t=this;try{var e=new(XMLHttpRequest||ActiveXObject)("MSXML2.XMLHTTP.3.0"),n=this.events.splice(0);if(n.length>0){e.open("POST",this.url,1),e.setRequestHeader("X-Requested-With","XMLHttpRequest"),e.setRequestHeader("Content-type","application/json"),e.onreadystatechange=function(){4===e.readyState&&((e.status>=400||e.status>=500)&&(t.events=t.events.concat(n),console.error("Failed to send tracking events:",e)),t.configuration.localStorage.setItem(i.CONSTANTS.LOCAL_STORAGE_KEY,JSON.stringify(t.events)))};var s=Object.assign({},{appName:this.configuration.appName,trackingId:this.configuration.trackingId,tenantId:this.configuration.tenantId,formFactor:this.configuration.formFactor,userId:this.configuration.userId,userAgent:window.navigator.userAgent},{events:n.map(function(t){return new o.EventPayload(r.Location.getStringValue(t.location),r.EventName.getStringValue(t.eventName),t.clientTime,t.object,t.data)})});e.send(JSON.stringify(s))}}catch(a){console.error("Failed to send tracking events:",a)}},t}();e.Logger=s},function(t,e){"use strict";var n=function(){function t(t,e,n,i,o){void 0===o&&(o={}),this.location=t,this.eventName=e,this.clientTime=n,this.object=i,this.data=o}return t}();e.EventPayload=n},function(t,e){"use strict";var n=function(){function t(t,e,n,i){var o=this;this.selector=e,this.event=n,this.element=document.querySelector(this.selector),this.buildEvent=i,this.logger=t,this.element?this.element.addEventListener(this.event,function(t){var e=o.buildEvent(o.element,t);o.logger.push(e)}):console.warn("Tombola Tracker: Could not find an element with selector",this.selector)}return t}();e.Interaction=n}])});